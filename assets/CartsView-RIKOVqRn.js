import{e as v,f,c as r,a as t,F as p,g as $,t as o,o as _,i as b,j as x}from"./index-TJuOxc8L.js";import{a as u}from"./axios-G2rPRu76.js";var y={VITE_API_URL:"https://vue3-course-api.hexschool.io",VITE_API_PATH:"vue3-api-use",BASE_URL:"/Vue2023_week6/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const V=t("h3",{class:"my-3"},"購物車",-1),C={class:"text-end mb-3"},I={class:"table align-middle"},E=t("thead",null,[t("tr",null,[t("th",null,"取消"),t("th",null,"品項"),t("th",null,"單價"),t("th",{style:{width:"150px"}},"數量"),t("th",{class:"text-end"},"總價")])],-1),k=["onClick"],A={class:"input-group input-group-sm"},P={class:"input-group"},T=["onUpdate:modelValue","onChange"],D={class:"input-group-text",id:"basic-addon2"},L={class:"text-end"},R=t("td",{colspan:"4",class:"text-end"},"總計",-1),U={class:"text-end"},q={__name:"CartsView",setup(w){const{VITE_API_URL:l,VITE_API_PATH:d}=y,c=v([]);function i(){u.get(`${l}/v2/api/${d}/cart`).then(e=>{c.value=e.data.data}).catch(e=>alert(e.response.data.message))}function h(){u.delete(`${l}/v2/api/${d}/carts`).then(e=>{alert(e.data.message),i()}).catch(e=>alert(e.response.data.message))}function m(e){u.delete(`${l}/v2/api/${d}/cart/${e}`).then(n=>{alert(n.data.message),i()}).catch(n=>alert(n.response.data.message))}function g(e,n){const s={product_id:e,qty:n};u.put(`${l}/v2/api/${d}/cart/${e}`,{data:s}).then(()=>i()).catch(a=>alert(a.response.data.message))}return f(()=>{i()}),(e,n)=>(_(),r(p,null,[V,t("div",C,[t("button",{class:"btn btn-outline-danger",onClick:n[0]||(n[0]=s=>h())},"清除購物車")]),t("table",I,[E,t("tbody",null,[(_(!0),r(p,null,$(c.value.carts,s=>(_(),r("tr",{key:s.id},[t("th",null,[t("button",{type:"button",class:"btn btn-sm btn-outline-danger",onClick:a=>m(s.id)},"X",8,k)]),t("td",null,o(s.product.title),1),t("td",null,"$ "+o(s.product.price),1),t("td",null,[t("div",A,[t("div",P,[b(t("input",{min:"1",type:"number",class:"form-control","onUpdate:modelValue":a=>s.qty=a,onChange:a=>g(s.id,s.qty)},null,40,T),[[x,s.qty]]),t("span",D,o(s.product.unit),1)])])]),t("td",L,"$ "+o(s.total),1)]))),128))]),t("tfoot",null,[t("tr",null,[R,t("td",U,"$ "+o(c.value.total),1)])])])],64))}};export{q as default};
